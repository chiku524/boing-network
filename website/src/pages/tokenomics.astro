---
import Layout from '../layouts/Layout.astro';
---

<Layout title="Tokenomics" description="The DeFi that always bounces back. BOING token economics — 1B max supply, sustainable emission schedule, fee allocation, and value accrual." canonical="/tokenomics">
  <article class="tokenomics-page">
    <header class="page-header">
      <h1 class="gradient-text-hero">Tokenomics</h1>
      <p class="lead">Sustainable value design — hard cap, declining emissions, fee burn. BOING accrues value through usage.</p>
    </header>

    <section class="stats-grid">
      <div class="stat-card">
        <span class="stat-value">1B</span>
        <span class="stat-label">Max Supply</span>
        <span class="stat-desc">Hard cap; no infinite inflation</span>
      </div>
      <div class="stat-card">
        <span class="stat-value">~2s</span>
        <span class="stat-label">Block Time</span>
        <span class="stat-desc">Balance of throughput and finality</span>
      </div>
      <div class="stat-card">
        <span class="stat-value">1%</span>
        <span class="stat-label">Long-term Floor</span>
        <span class="stat-desc">Year 10+ inflation (or 0% if fees sufficient)</span>
      </div>
    </section>

    <section class="charts-section">
      <div class="chart-card">
        <h2>Fee Allocation</h2>
        <p class="chart-desc">How transaction fees are distributed</p>
        <div class="chart-wrapper">
          <canvas id="feeChart" width="400" height="300"></canvas>
        </div>
        <ul class="legend">
          <li><span class="dot" style="background:#3b82f6"></span> Validators 70%</li>
          <li><span class="dot" style="background:#8b5cf6"></span> Treasury 20%</li>
          <li><span class="dot" style="background:#ef4444"></span> Burn 10%</li>
        </ul>
      </div>

      <div class="chart-card">
        <h2>Emission Schedule</h2>
        <p class="chart-desc">Annual inflation declines over time; fee revenue becomes dominant</p>
        <div class="chart-wrapper">
          <canvas id="emissionChart" width="400" height="300"></canvas>
        </div>
      </div>
    </section>

    <section class="content-section">
      <h2>Value Accrual</h2>
      <div class="value-loop">
        <p><strong>Usage ↑</strong> → Fees ↑ → Burn ↑ → Supply ↓ → <strong>Value ↑</strong></p>
      </div>
      <p>As transaction volume grows, burned BOING increases → supply decreases → value accrues. A sustainable flywheel.</p>
    </section>

    <section class="content-section">
      <h2>Why BOING Is Sustainable</h2>
      <ul class="feature-list">
        <li><strong>Hard supply cap</strong> — 1B max; no infinite inflation</li>
        <li><strong>Declining emissions</strong> — Inflation trends to 1% or 0%</li>
        <li><strong>Fee burn</strong> — Usage reduces supply</li>
        <li><strong>Fee-dominant revenue</strong> — At maturity, validators earn from fees, not dilution</li>
        <li><strong>Fair launch</strong> — No large pre-mine; long-term alignment</li>
      </ul>
    </section>
  </article>
</Layout>

<script>
  import { Chart, ArcElement, CategoryScale, LinearScale, BarElement, LineElement, PointElement, Filler, Tooltip, Legend } from 'chart.js';

  Chart.register(ArcElement, CategoryScale, LinearScale, BarElement, LineElement, PointElement, Filler, Tooltip, Legend);

  function initCharts() {
    const brandColors = {
      primary: '#3b82f6',
      secondary: '#8b5cf6',
      accent: '#06b6d4',
      burn: '#ef4444',
      grid: 'rgba(148, 163, 184, 0.2)',
      text: '#cbd5e1',
    };

    // Fee allocation pie
    const feeCtx = document.getElementById('feeChart')?.getContext('2d');
    if (feeCtx) {
      new Chart(feeCtx, {
        type: 'doughnut',
        data: {
          labels: ['Validators', 'Treasury', 'Burn'],
          datasets: [{
            data: [70, 20, 10],
            backgroundColor: [brandColors.primary, brandColors.secondary, brandColors.burn],
            borderColor: '#1e293b',
            borderWidth: 2,
          }],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
          },
        },
      });
    }

    // Emission schedule line chart
    const emissionCtx = document.getElementById('emissionChart')?.getContext('2d');
    if (emissionCtx) {
      const years = ['Y1', 'Y2', 'Y3', 'Y4', 'Y5', 'Y6', 'Y7', 'Y8', 'Y9', 'Y10+'];
      const inflation = [8, 6, 4.5, 3.4, 2.5, 2, 1.8, 1.6, 1.4, 1];

      new Chart(emissionCtx, {
        type: 'line',
        data: {
          labels: years,
          datasets: [{
            label: 'Annual Inflation %',
            data: inflation,
            borderColor: brandColors.accent,
            backgroundColor: 'rgba(6, 182, 212, 0.1)',
            fill: true,
            tension: 0.3,
          }],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false },
          },
          scales: {
            y: {
              min: 0,
              max: 10,
              grid: { color: brandColors.grid },
              ticks: { color: brandColors.text },
            },
            x: {
              grid: { color: brandColors.grid },
              ticks: { color: brandColors.text },
            },
          },
        },
      });
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCharts);
  } else {
    initCharts();
  }
</script>

<style>
  .tokenomics-page {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem;
  }

  .page-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .page-header h1 {
    font-size: clamp(2rem, 4vw, 2.5rem);
    margin: 0 0 0.5rem;
    filter: drop-shadow(0 0 20px var(--glow-cyan-subtle));
  }

  .lead {
    font-size: 1.125rem;
    color: var(--text-secondary);
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1rem;
    margin-bottom: 3rem;
  }

  .stat-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 1rem;
    padding: 1.5rem;
    text-align: center;
    transition: all 0.2s;
  }

  .stat-card:hover {
    border-color: var(--accent-neon);
    box-shadow: 0 0 20px var(--glow-cyan-subtle);
  }

  .stat-value {
    display: block;
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--accent-neon);
  }

  .stat-label {
    display: block;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0.25rem 0;
  }

  .stat-desc {
    font-size: 0.8rem;
    color: var(--text-tertiary);
  }

  .charts-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .chart-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 1rem;
    padding: 1.5rem;
  }

  .chart-card h2 {
    font-size: 1.25rem;
    margin: 0 0 0.25rem;
    color: var(--text-primary);
  }

  .chart-desc {
    font-size: 0.9rem;
    color: var(--text-tertiary);
    margin-bottom: 1rem;
  }

  .chart-wrapper {
    height: 280px;
    margin-bottom: 1rem;
  }

  .legend {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
    font-size: 0.9rem;
    color: var(--text-secondary);
  }

  .legend .dot {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 0.35rem;
    vertical-align: middle;
  }

  .content-section {
    margin-bottom: 2rem;
  }

  .content-section h2 {
    color: var(--text-primary);
    margin-bottom: 1rem;
  }

  .value-loop {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    padding: 1rem 1.5rem;
    margin: 1rem 0;
    font-family: var(--font-mono);
    color: var(--accent-neon);
  }

  .feature-list {
    color: var(--text-secondary);
    line-height: 1.8;
  }
</style>
